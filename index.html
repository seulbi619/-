<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ì½”ë”© ìš°ì£¼ì„  ë°©íƒˆì¶œ ê²Œì„ - ìµœì¢…íŒ</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background-color: #1a1a1a;
        }

        /* ê²Œì„ ì»¨í…Œì´ë„ˆ */
        #game-container {
            position: relative;
            width: 100vw;
            max-width: 1200px;
            height: auto;
            margin: auto;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        #background-image {
            width: 100%;
            display: block;
            transition: opacity 0.5s ease-in-out;
        }

        /* í´ë¦­ ê°€ëŠ¥í•œ ì˜¤ë¸Œì íŠ¸ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .clickable-object {
            position: absolute;
            cursor: pointer;
            /* ê°œë°œ ì‹œ ìœ„ì¹˜ í™•ì¸ìš© ì„ì‹œ í…Œë‘ë¦¬ */
            /* border: 2px dashed yellow; */
            transition: background-color 0.2s;
            -webkit-tap-highlight-color: transparent;
            border-radius: 8px;
        }

        @media (hover: hover) {
            .clickable-object:hover {
                background-color: rgba(255, 255, 0, 0.4);
            }
        }
        
        /* 1ë‹¨ê³„ ì˜¤ë¸Œì íŠ¸ ìœ„ì¹˜ */
        #monitor { top: 55%; left: 4%; width: 28%; height: 28%; }
        #light-bulb { top: 19%; left: 9%; width: 8%; height: 20%; }
        #clock { top: 65%; left: 60%; width: 20%; height: 25%; }
        #engine { top: 25%; left: 29%; width: 42%; height: 50%; border-radius: 50%; }
        #exit-door { top: 40%; left: 70%; width: 15%; height: 45%; }
        
        /* 2ë‹¨ê³„ ì˜¤ë¸Œì íŠ¸ ìœ„ì¹˜ */
        #earth-gate { top: 30%; left: 34%; width: 32%; height: 40%; border-radius: 50%; }
        #asteroid1 { top: 15%; left: 10%; width: 18%; height: 20%; }
        #asteroid2 { top: 20%; left: 70%; width: 20%; height: 22%; }
        #asteroid3 { top: 65%; left: 15%; width: 15%; height: 18%; }
        #asteroid4 { top: 60%; left: 68%; width: 22%; height: 25%; }
        
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ (ê³µí†µ) */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.75); display: flex; justify-content: center;
            align-items: center; z-index: 1000; opacity: 1; transition: opacity 0.3s ease;
            padding: 15px; box-sizing: border-box;
        }
        .modal.hidden { opacity: 0; pointer-events: none; }
        .modal-content {
            background-color: #e9e9e9; color: #333; padding: 25px; border-radius: 10px;
            text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            width: 100%; max-width: 480px;
        }
        .modal-content h3 { margin-top: 0; color: #005a9c; }
        .modal-content p { font-size: 1.1em; margin-bottom: 20px; }
        .modal-content input[type="text"] {
            width: 80%; padding: 10px; margin-bottom: 20px;
            border: 1px solid #ccc; border-radius: 5px; font-size: 1em;
        }
        .modal-content button {
            padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;
            font-size: 1em; margin: 5px; transition: all 0.2s;
        }
        .modal-content button:active { transform: scale(0.98); }
        .modal-content .close-button { background-color: #888; color: white; }
        .modal-content .close-button:hover { background-color: #777; }
        
        /* í€´ì¦ˆ ìœ í˜•ë³„ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .quiz-option-btn, #ox-options button, #fill-in-the-blank-submit, #password-submit {
             background-color: #4a6c8c; color: white;
        }
        .quiz-option-btn:hover, #ox-options button:hover, #fill-in-the-blank-submit:hover, #password-submit:hover {
             background-color: #5a86b0;
        }
        #mcq-options .quiz-option-btn, #ox-options button { display: block; width: 90%; margin: 10px auto; padding: 12px; font-size: 1.1em; }

        /* ê¸°íƒ€ ìŠ¤íƒ€ì¼ */
        #memory-game-board {
            display: grid; grid-template-columns: repeat(5, 1fr);
            gap: 8px; margin: 20px auto; max-width: 400px;
        }
        .card { width: 100%; padding-bottom: 100%; position: relative; perspective: 1000px; cursor: pointer; }
        .card-inner { position: absolute; top:0; left: 0; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .card.is-flipped .card-inner { transform: rotateY(180deg); }
        .card-face {
            position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden;
            backface-visibility: hidden; display: flex; justify-content: center; align-items: center;
            font-size: 2em; border-radius: 5px; box-sizing: border-box;
        }
        .card-front { background: linear-gradient(45deg, #2c3e50, #34495e); }
        .card-back { background-color: #f0f0f0; color: black; transform: rotateY(180deg); }
        #memory-game-hint { font-weight: bold; color: #28a745; margin-top: 15px; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="game-container">
        <img src="https://i.postimg.cc/FHXsH6Jf/Whisk-storyboardacaf958668fe412e9fba63ad-1.jpg" alt="ìš°ì£¼ì„  ë‚´ë¶€ ë°°ê²½" id="background-image">
        
        <div id="room1-objects">
            <div class="clickable-object" id="monitor" title="ëª¨ë‹ˆí„°"></div>
            <div class="clickable-object" id="light-bulb" title="ì „êµ¬"></div>
            <div class="clickable-object" id="clock" title="ì‹œê³„"></div>
            <div class="clickable-object" id="engine" title="ì—”ì§„"></div>
            <div class="clickable-object" id="exit-door" title="íƒˆì¶œêµ¬"></div>
        </div>
        <div id="room2-objects" class="hidden">
            <div class="clickable-object" id="earth-gate" title="ì§€êµ¬ ê·€í™˜ ê²Œì´íŠ¸"></div>
            <div class="clickable-object" id="asteroid1" title="ì²« ë²ˆì§¸ ì†Œí–‰ì„±"></div>
            <div class="clickable-object" id="asteroid2" title="ë‘ ë²ˆì§¸ ì†Œí–‰ì„±"></div>
            <div class="clickable-object" id="asteroid3" title="ì„¸ ë²ˆì§¸ ì†Œí–‰ì„±"></div>
            <div class="clickable-object" id="asteroid4" title="ë„¤ ë²ˆì§¸ ì†Œí–‰ì„±"></div>
        </div>
    </div>

    <!-- ëª¨ë“  ëª¨ë‹¬ë“¤ -->
    <div id="info-modal" class="modal hidden"><div class="modal-content"><p id="info-text"></p><button class="close-button">ë‹«ê¸°</button></div></div>
    <div id="mcq-modal" class="modal hidden"><div class="modal-content"><h3>í€´ì¦ˆ</h3><p id="mcq-question"></p><div id="mcq-options"></div><button class="close-button">ë‹«ê¸°</button></div></div>
    <div id="ox-quiz-modal" class="modal hidden"><div class="modal-content"><h3>ì „êµ¬ í€´ì¦ˆ</h3><p id="ox-question"></p><div id="ox-options"></div><button class="close-button">ë‹«ê¸°</button></div></div>
    <div id="memory-game-modal" class="modal hidden"><div class="modal-content"><h3>ì—”ì§„ë¶€ ë©”ëª¨ë¦¬ í•´ë…</h3><p>ê°™ì€ ì´ëª¨í‹°ì½˜ì„ ì°¾ì•„ ì§ì„ ë§ì¶”ì„¸ìš”.</p><div id="memory-game-board"></div><p id="memory-game-hint" class="hidden"></p><button class="close-button">ë‹«ê¸°</button></div></div>
    <div id="fill-in-the-blank-modal" class="modal hidden"><div class="modal-content"><h3>ì‹œê³„ ì•”í˜¸</h3><p id="fill-in-the-blank-question"></p><input type="text" id="fill-in-the-blank-answer" placeholder="ì •ë‹µ í•¨ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”"><button id="fill-in-the-blank-submit" class="quiz-option-btn">ì •ë‹µ í™•ì¸</button><button class="close-button">ë‹«ê¸°</button></div></div>
    <div id="password-modal" class="modal hidden"><div class="modal-content"><h3 id="password-title"></h3><p id="password-desc"></p><input type="text" id="password-input" maxlength="4"><button id="password-submit">í™•ì¸</button><button class="close-button">ë‹«ê¸°</button></div></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- ê²Œì„ ìƒíƒœ ë° ë³€ìˆ˜ ì´ˆê¸°í™” ---
            let passwordDigits = [];
            const solvedObjects = {
                monitor: false, lightBulb: false, engine: false, clock: false,
                asteroid1: false, asteroid2: false, asteroid3: false, asteroid4: false
            };

            // --- DOM ìš”ì†Œ ---
            const backgroundImage = document.getElementById('background-image');
            const room1Objects = document.getElementById('room1-objects');
            const room2Objects = document.getElementById('room2-objects');
            const clickableObjects = {
                monitor: document.getElementById('monitor'),
                lightBulb: document.getElementById('light-bulb'),
                engine: document.getElementById('engine'),
                clock: document.getElementById('clock'),
                exitDoor: document.getElementById('exit-door'),
                earthGate: document.getElementById('earth-gate'),
                asteroid1: document.getElementById('asteroid1'),
                asteroid2: document.getElementById('asteroid2'),
                asteroid3: document.getElementById('asteroid3'),
                asteroid4: document.getElementById('asteroid4'),
            };
            const modals = {
                info: document.getElementById('info-modal'),
                mcq: document.getElementById('mcq-modal'),
                ox: document.getElementById('ox-quiz-modal'),
                memory: document.getElementById('memory-game-modal'),
                fill: document.getElementById('fill-in-the-blank-modal'),
                password: document.getElementById('password-modal')
            };
            const infoText = document.getElementById('info-text');

            // --- ê³µìš© í•¨ìˆ˜ ---
            const openModal = (modal) => modal.classList.remove('hidden');
            const closeModal = (modal) => modal.classList.add('hidden');
            document.querySelectorAll('.close-button').forEach(btn => btn.addEventListener('click', () => btn.closest('.modal').classList.add('hidden')));
            
            function showHint(objectName, hintText) {
                solvedObjects[objectName] = true;
                infoText.textContent = hintText;
                openModal(modals.info);
            }
            
            function changeStage() {
                backgroundImage.style.opacity = 0;
                setTimeout(() => {
                    backgroundImage.src = 'https://i.postimg.cc/P5HyQtwd/Whisk-storyboardfeba34587f4f455abf40dbf9.jpg';
                    room1Objects.classList.add('hidden');
                    room2Objects.classList.remove('hidden');
                    backgroundImage.style.opacity = 1;
                }, 500);
            }

            function setupMcqModal({ question, options, onCorrect, onWrong }) {
                const modal = modals.mcq;
                modal.querySelector('h3').textContent = 'í€´ì¦ˆ';
                modal.querySelector('#mcq-question').textContent = question;
                const optionsContainer = modal.querySelector('#mcq-options');
                optionsContainer.innerHTML = '';

                options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.textContent = opt.text;
                    btn.className = 'quiz-option-btn';
                    btn.onclick = () => {
                        closeModal(modal);
                        if (opt.correct) onCorrect();
                        else onWrong();
                    };
                    optionsContainer.appendChild(btn);
                });
                openModal(modal);
            }
            
            // --- 1ë‹¨ê³„ ë¡œì§ ---
            function generatePassword() {
                const numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
                numbers.sort(() => Math.random() - 0.5);
                passwordDigits = numbers.slice(0, 4);
            }

            clickableObjects.monitor.addEventListener('click', () => {
                if (solvedObjects.monitor) return showHint('monitor', `ì´ë¯¸ í•´ê²°í–ˆìŠµë‹ˆë‹¤. [ì²« ë²ˆì§¸ ìˆ«ìëŠ” ${passwordDigits[0]}]`);
                setupMcqModal({
                    question: "ë³€ìˆ˜ëŠ” ë¬´ì—‡ì„ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê±¸ê¹Œìš”?",
                    options: [
                        { text: 'A. ì»´í“¨í„°ì—ê²Œ ë…¸ë˜ë¥¼ ë¶€ë¥´ê²Œ í•  ë•Œ', correct: false },
                        { text: 'B. ìˆ«ìë‚˜ ê¸€ìë¥¼ ì ê¹ ì €ì¥í•´ë‘˜ ë•Œ', correct: true },
                        { text: 'C. ê·¸ë¦¼ì„ ê·¸ë¦´ ë•Œ', correct: false },
                        { text: 'D. ì»´í“¨í„°ë¥¼ ëŒ ë•Œ', correct: false }
                    ],
                    onCorrect: () => showHint('monitor', `ì •ë‹µ! [ì²« ë²ˆì§¸ ìˆ«ìëŠ” ${passwordDigits[0]} ì…ë‹ˆë‹¤.]`),
                    onWrong: () => alert('ì˜¤ë‹µì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.')
                });
            });

            // --- [ìˆ˜ì •ëœ ë¶€ë¶„] ì „êµ¬ í€´ì¦ˆ ---
            clickableObjects.lightBulb.addEventListener('click', () => {
                if (solvedObjects.lightBulb) {
                    showHint('lightBulb', `ì´ë¯¸ í•´ê²°í•œ ë¬¸ì œì…ë‹ˆë‹¤. [ë¹„ë°€ë²ˆí˜¸ì˜ ë‘ ë²ˆì§¸ ìˆ«ìëŠ” ${passwordDigits[1]} ì…ë‹ˆë‹¤.]`);
                    return;
                }
                
                const modal = modals.ox;
                modal.querySelector('#ox-question').textContent = "í”„ë¡œê·¸ë˜ë°ì—ì„œ 5 > 2ëŠ” ì°¸(True)ì´ë‹¤.";
                const optionsContainer = modal.querySelector('#ox-options');
                optionsContainer.innerHTML = `
                    <button data-answer="O">â­• O</button>
                    <button data-answer="X">âŒ X</button>
                `;

                optionsContainer.querySelectorAll('button').forEach(btn => {
                    btn.addEventListener('click', () => {
                        closeModal(modal);
                        if (btn.dataset.answer === 'O') {
                            showHint('lightBulb', `ì •ë‹µ! ì „êµ¬ê°€ ê¹œë¹¡ì´ë©° ì‹ í˜¸ë¥¼ ë³´ë‚¸ë‹¤. [ë¹„ë°€ë²ˆí˜¸ì˜ ë‘ ë²ˆì§¸ ìˆ«ìëŠ” ${passwordDigits[1]} ì…ë‹ˆë‹¤.]`);
                        } else {
                            alert('ì˜¤ë‹µì…ë‹ˆë‹¤. ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”.');
                        }
                    });
                });
                
                openModal(modal);
            });

            clickableObjects.clock.addEventListener('click', () => {
                 if (solvedObjects.clock) return showHint('clock', `ì´ë¯¸ í•´ê²°í–ˆìŠµë‹ˆë‹¤. [ë„¤ ë²ˆì§¸ ìˆ«ìëŠ” ${passwordDigits[3]}]`);
                 const questionModal = modals.fill;
                 questionModal.querySelector('p').textContent = "ì‚¬ìš©ìì—ê²Œ í‚¤ë³´ë“œë¡œ ì…ë ¥ì„ ë°›ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ëŠ”?";
                 const answerInput = questionModal.querySelector('input');
                 answerInput.value = '';
                 questionModal.querySelector('#fill-in-the-blank-submit').onclick = () => {
                    const userAnswer = answerInput.value.trim().toLowerCase();
                    if (userAnswer === 'input()' || userAnswer === 'input') {
                        closeModal(questionModal);
                        showHint('clock', `ì •ë‹µ! [ë„¤ ë²ˆì§¸ ìˆ«ìëŠ” ${passwordDigits[3]} ì…ë‹ˆë‹¤.]`);
                    } else {
                        alert('ì˜¤ë‹µì…ë‹ˆë‹¤. ê´„í˜¸()ê¹Œì§€ ì •í™•í•˜ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    }
                 };
                 openModal(questionModal);
            });

            clickableObjects.engine.addEventListener('click', () => {
                if (solvedObjects.engine) return showHint('engine', `ì´ë¯¸ í•´ê²°í–ˆìŠµë‹ˆë‹¤. [ì„¸ ë²ˆì§¸ ìˆ«ìëŠ” ${passwordDigits[2]}]`);
                openModal(modals.memory);
                initializeMemoryGame();
            });
            
            function initializeMemoryGame() {
                const board = document.getElementById('memory-game-board');
                const hint = document.getElementById('memory-game-hint');
                const cards = ['ğŸ–¥ï¸', 'ğŸ–¥ï¸', 'ğŸ“¦', 'ğŸ“¦', 'ğŸ§ ', 'ğŸ§ ', 'ğŸ”', 'ğŸ”', 'â“', 'â“'];
                let flipped = [], matched = 0, lock = false;
                board.innerHTML = '';
                hint.classList.add('hidden');
                cards.sort(() => Math.random() - 0.5);
                cards.forEach(val => {
                    const card = document.createElement('div');
                    card.classList.add('card');
                    card.dataset.value = val;
                    card.innerHTML = `<div class="card-inner"><div class="card-face card-front"></div><div class="card-face card-back">${val}</div></div>`;
                    card.addEventListener('click', function() {
                        if (lock || this.classList.contains('is-flipped') || flipped[0] === this) return;
                        this.classList.add('is-flipped');
                        flipped.push(this);
                        if (flipped.length === 2) {
                            lock = true;
                            setTimeout(() => {
                                if (flipped[0].dataset.value === flipped[1].dataset.value) {
                                    matched++;
                                    if (matched === cards.length / 2) {
                                        hint.textContent = `í•´ë… ì™„ë£Œ! [ì„¸ ë²ˆì§¸ ìˆ«ìëŠ” ${passwordDigits[2]} ì…ë‹ˆë‹¤.]`;
                                        hint.classList.remove('hidden');
                                        solvedObjects.engine = true;
                                    }
                                } else {
                                    flipped[0].classList.remove('is-flipped');
                                    flipped[1].classList.remove('is-flipped');
                                }
                                flipped = [];
                                lock = false;
                            }, 800);
                        }
                    });
                    board.appendChild(card);
                });
            }

            clickableObjects.exitDoor.addEventListener('click', () => {
                const modal = modals.password;
                modal.querySelector('#password-title').textContent = 'íƒˆì¶œêµ¬ ì ê¸ˆì¥ì¹˜';
                modal.querySelector('#password-desc').textContent = 'íšë“í•œ 4ìë¦¬ ë¹„ìƒ ì½”ë“œë¥¼ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•˜ì.';
                const input = modal.querySelector('#password-input');
                input.type = 'text';
                input.maxLength = 4;
                input.inputMode = 'numeric';
                input.placeholder = 'ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬';
                input.value = '';
                
                modal.querySelector('#password-submit').onclick = () => {
                    if (input.value === passwordDigits.join('')) {
                        closeModal(modal);
                        changeStage(); // 2ë‹¨ê³„ë¡œ ì „í™˜
                    } else {
                        alert('ë¹„ìƒ ì½”ë“œê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.');
                    }
                };
                openModal(modal);
            });

            // --- 2ë‹¨ê³„ ë¡œì§ ---
            clickableObjects.asteroid1.addEventListener('click', () => {
                if(solvedObjects.asteroid1) return showHint('asteroid1', "ì´ë¯¸ ë°ì´í„° ì¡°ê°ì„ íšë“í–ˆìŠµë‹ˆë‹¤. [ì„¸ ë²ˆì§¸ ê¸€ìëŠ” 'ì„±' ì…ë‹ˆë‹¤.]");
                setupMcqModal({
                    question: "ì›¹ì‚¬ì´íŠ¸ì—ì„œ CSSëŠ” ë­˜ í• ê¹Œìš”?",
                    options: [
                        { text: 'A. í•˜ëŠ˜ì—ì„œ ë¹„ê°€ ì˜¤ê²Œ í•œë‹¤', correct: false },
                        { text: 'B. ëª¨ìë¥¼ ì“°ê²Œ í•œë‹¤', correct: false },
                        { text: 'C. ê¸€ì”¨ë‚˜ ë°°ê²½ì— ì˜ˆìœ ìƒ‰ì„ ì…íŒë‹¤', correct: true }
                    ],
                    onCorrect: () => showHint('asteroid1', "ì •ë‹µ! [ì„¸ ë²ˆì§¸ ê¸€ìëŠ” 'ì„±' ì…ë‹ˆë‹¤.]"),
                    onWrong: () => alert('ì˜¤ë‹µì…ë‹ˆë‹¤. ì†Œí–‰ì„±ì´ ë” ë©€ì–´ì§‘ë‹ˆë‹¤.')
                });
            });

            clickableObjects.asteroid2.addEventListener('click', () => {
                if(solvedObjects.asteroid2) return showHint('asteroid2', "ì´ë¯¸ ë°ì´í„° ì¡°ê°ì„ íšë“í–ˆìŠµë‹ˆë‹¤. [ì²« ë²ˆì§¸ ê¸€ìëŠ” 'íƒˆ' ì…ë‹ˆë‹¤.]");
                 setupMcqModal({
                    question: "ì›¹í˜ì´ì§€ë¥¼ ë§Œë“¤ ë•Œ HTMLì€ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?",
                    options: [
                        { text: 'A. ê¸€ì”¨, ì‚¬ì§„, ë²„íŠ¼ ê°™ì€ ë‚´ìš©ì„ ë§Œë“ ë‹¤', correct: true },
                        { text: 'B. ì»´í“¨í„°ë¥¼ ëˆë‹¤', correct: false },
                        { text: 'C. ìƒ‰ê¹”ì„ ë°”ê¾¼ë‹¤', correct: false }
                    ],
                    onCorrect: () => showHint('asteroid2', "ì •ë‹µ! [ì²« ë²ˆì§¸ ê¸€ìëŠ” 'íƒˆ' ì…ë‹ˆë‹¤.]"),
                    onWrong: () => alert('ì˜¤ë‹µì…ë‹ˆë‹¤. ì†Œí–‰ì„±ì´ ë” ë©€ì–´ì§‘ë‹ˆë‹¤.')
                });
            });

            clickableObjects.asteroid3.addEventListener('click', () => {
                if(solvedObjects.asteroid3) return showHint('asteroid3', "ì´ë¯¸ ë°ì´í„° ì¡°ê°ì„ íšë“í–ˆìŠµë‹ˆë‹¤. [ë„¤ ë²ˆì§¸ ê¸€ìëŠ” 'ê³µ' ì…ë‹ˆë‹¤.]");
                setupMcqModal({
                    question: "ë²„íŠ¼ì„ ë§Œë“¤ê³ , ìƒ‰ì¹ í•˜ê³ , ëˆ„ë¥´ë©´ ë§í•˜ê²Œ í•˜ë ¤ë©´ ì–´ë–¤ ìˆœì„œì¼ê¹Œìš”?",
                    options: [
                        { text: 'A. ë§í•˜ê²Œ í•˜ê¸° â†’ ë§Œë“¤ê¸° â†’ ìƒ‰ì¹ í•˜ê¸°', correct: false },
                        { text: 'B. ë§Œë“¤ê¸° â†’ ìƒ‰ì¹ í•˜ê¸° â†’ ë§í•˜ê²Œ í•˜ê¸°', correct: true },
                        { text: 'C. ì¶¤ì¶”ê¸° â†’ ë…¸ë˜í•˜ê¸° â†’ ìš”ë¦¬í•˜ê¸°', correct: false }
                    ],
                    onCorrect: () => showHint('asteroid3', "ì •ë‹µ! [ë„¤ ë²ˆì§¸ ê¸€ìëŠ” 'ê³µ' ì…ë‹ˆë‹¤.]"),
                    onWrong: () => alert('ì˜¤ë‹µì…ë‹ˆë‹¤. ì†Œí–‰ì„±ì´ ë” ë©€ì–´ì§‘ë‹ˆë‹¤.')
                });
            });

            clickableObjects.asteroid4.addEventListener('click', () => {
                if(solvedObjects.asteroid4) return showHint('asteroid4', "ì´ë¯¸ ë°ì´í„° ì¡°ê°ì„ íšë“í–ˆìŠµë‹ˆë‹¤. [ë‘ ë²ˆì§¸ ê¸€ìëŠ” 'ì¶œ' ì…ë‹ˆë‹¤.]");
                setupMcqModal({
                    question: "ì›¹í˜ì´ì§€ì—ì„œ JavaScriptëŠ” ë¬´ì—‡ì„ í•  ë•Œ ì“°ë‚˜ìš”?",
                    options: [
                        { text: 'A. ê¸€ì ìƒ‰ê¹”ì„ ë°”ê¾¼ë‹¤', correct: false },
                        { text: 'B. ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë°˜ì‘í•˜ê²Œ í•œë‹¤', correct: true },
                        { text: 'C. ê·¸ë¦¼ì„ ê·¸ë¦°ë‹¤', correct: false }
                    ],
                    onCorrect: () => showHint('asteroid4', "ì •ë‹µ! [ë‘ ë²ˆì§¸ ê¸€ìëŠ” 'ì¶œ' ì…ë‹ˆë‹¤.]"),
                    onWrong: () => alert('ì˜¤ë‹µì…ë‹ˆë‹¤. ì†Œí–‰ì„±ì´ ë” ë©€ì–´ì§‘ë‹ˆë‹¤.')
                });
            });

            clickableObjects.earthGate.addEventListener('click', () => {
                const modal = modals.password;
                modal.querySelector('#password-title').textContent = 'ì§€êµ¬ ê·€í™˜ ê²Œì´íŠ¸';
                modal.querySelector('#password-desc').textContent = 'íšë“í•œ ê¸€ìë“¤ì„ ìˆœì„œì— ë§ê²Œ ì¡°í•©í•˜ì—¬ ìµœì¢… ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.';
                const input = modal.querySelector('#password-input');
                input.type = 'text';
                input.maxLength = 4;
                input.inputMode = 'text';
                input.placeholder = 'ìµœì¢… ì•”í˜¸ 4ê¸€ì';
                input.value = '';
                
                modal.querySelector('#password-submit').onclick = () => {
                    if (input.value === 'íƒˆì¶œì„±ê³µ') {
                        closeModal(modal);
                        // --- [ìˆ˜ì •ëœ ë¶€ë¶„] ìµœì¢… ì„±ê³µ ë©”ì‹œì§€ ---
                        alert('íƒˆì¶œ ì„±ê³µ! ğŸ‰ ì§‘ìœ¼ë¡œ ê·€í™˜~!');
                        backgroundImage.style.opacity = 0;
                        setTimeout(() => {
                           backgroundImage.src = 'https://i.postimg.cc/9fhffnK8/Whisk-17c14cbf14.jpg';
                           room2Objects.classList.add('hidden');
                           backgroundImage.style.opacity = 1;
                        }, 500);
                    } else {
                        alert('ì•”í˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. íšë“í•œ íŒíŠ¸ì˜ ìˆœì„œë¥¼ ì˜ í™•ì¸í•´ë³´ì„¸ìš”.');
                    }
                };
                openModal(modal);
            });

            // --- ê²Œì„ ì‹œì‘ ---
            generatePassword();
        });
    </script>
</body>
</html>